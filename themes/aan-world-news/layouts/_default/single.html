{{ define "main" -}}

{{ $author := index .Site.Data.authors .Params.author }}

<article class="post">
  <div class="container">
    <div class="post__container">
      <header class="post__header">

        {{ if isset .Params "title" }}
          <h1>{{ .Title }}</h1>
        {{ end }}

        {{ if $author.name }}
          <span class="post__author">
            by <a href="#">{{ $author.name }}</a>
          </span>
        {{ end }}

        {{ if isset .Params "fictionaldate" }}
          <time class="post__date" datetime="{{ .PublishDate.Format "2006-01-02" }}">
            {{ .Params.fictionaldate }}
          </time>
        {{ end }}

      </header>

      {{ if isset .Params "description" }}
        <p class="post__description">{{ .Params.description }}</p>
      {{ end }}

      {{ .Content }}
      
      {{ if isset .Params "author" }}
        <footer class="post__footer grid">
          <img src="{{ $author.image }}" alt="Portrait of {{ $author.name }}" />
          <p>{{ $author.bio }}</p>
        </footer>
      {{ end }}

    </div>
  </div>
</article>

{{ partial "pagination/post-pagination.html" . }}

{{- end }}